<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Developing Workflow with the Operator :: Kogito Serverless Workflow Guides</title>
    <meta name="description" content="Developing workflows with the operator on Kubernetes">
    <meta name="keywords" content="kogito, sonataflow, workflow, serverless, operator, kubernetes, minikube, devmode">
    <meta name="generator" content="Antora 3.1.4">
    <link rel="stylesheet" href="../../../../_/css/site.css">
<link rel="icon" href="../../../../_/img/favicon.ico" type="image/x-icon">

<link rel="stylesheet" href="../../../../_/css/search.css">
<link rel="stylesheet" href="../../../../_/css/menu.css">
<link rel="stylesheet" href="../../../../_/css/tabs.css">
<link rel="stylesheet" href="../../../../_/css/navbar.css">
<link rel="stylesheet" href="../../../../_/css/custom.css">
<link rel="stylesheet" href="../../../../_/css/home.css"><script>var uiRootPath = '../../../../_'</script>
  </head>
  <body class="article">
<header class="header">
    <nav class="navbar">
        <div class="navbar-brand">
            <div class="navbar-item">
                <a href="../../../..">
                    <img src="../../../../_/img/kogitoLogo_default_64px.png" height="50px" alt="Kogito logo"/>
                </a>
                <a class="navbar-item" href="../../../..">
                    Kogito Serverless Workflow Guides
                </a>
            </div>
                <div class="navbar-item search hide-for-print">
                    <div id="search-field" class="field">
                        <input id="search-input" type="text" placeholder="Search docs">
                    </div>
                </div>
            <button class="navbar-burger" data-target="topbar-nav">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
        <div id="topbar-nav" class="navbar-menu">
            <div class="navbar-end">
                <div class="navbar-item">
                    <a class="navbar-item small-item" href="https://github.com/kiegroup"
                       target="_blank" title="Follow KIE on GitHub">
                        <div class="github-icon"></div>
                    </a>
                </div>
            </div>
        </div>
    </nav>
</header>
<div class="body">
<div class="nav-container" data-component="serverlessworkflow" data-version="1.40.0.Final">
  <aside class="nav">
    <div class="panels">
<div class="nav-panel-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="../../index.html">Kogito Serverless Workflow Guides</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="../../release_notes.html">Release notes</a>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Getting Started</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started/create-your-first-workflow-service.html">Creating your first workflow service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started/cncf-serverless-workflow-specification-support.html">CNCF Serverless Workflow specification</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../getting-started/getting-familiar-with-our-tooling.html">Getting familiar with tooling</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Core</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/understanding-jq-expressions.html">jq expressions</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/understanding-workflow-error-handling.html">Error handling</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/working-with-parallelism.html">Parallelism</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/configuration-properties.html">Configuration properties</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/defining-an-input-schema-for-workflows.html">Input schema definition</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/custom-functions-support.html">Custom functions for your workflow service</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../core/timeouts-support.html">Timeouts Support</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Tooling</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tooling/serverless-workflow-editor/swf-editor-overview.html">Editor</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tooling/serverless-workflow-editor/swf-editor-vscode-extension.html">VS Code extension</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../tooling/serverless-workflow-editor/swf-editor-chrome-extension.html">Chrome extension for GitHub</a>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../tooling/serverless-logic-web-tools/serverless-logic-web-tools-overview.html">Serverless Logic Web Tools</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tooling/serverless-logic-web-tools/serverless-logic-web-tools-github-integration.html">Integration with GitHub</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tooling/serverless-logic-web-tools/serverless-logic-web-tools-openshift-integration.html">Integration with OpenShift</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tooling/serverless-logic-web-tools/serverless-logic-web-tools-redhat-application-services-integration.html">Integration with Service Registries</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../tooling/serverless-logic-web-tools/serverless-logic-web-tools-deploy-projects.html">Deployment</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Service Orchestration</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../service-orchestration/orchestration-of-openapi-based-services.html">Orchestrating the OpenAPI services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../service-orchestration/configuring-openapi-services-endpoints.html">Configuring the OpenAPI services endpoints</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../service-orchestration/orchestration-of-asyncapi-based-services.html">Orchestrating the AsyncAPI services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../service-orchestration/orchestration-of-grpc-services.html">Orchestration of gRPC based services</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Eventing</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../eventing/handling-events-on-workflows.html">Event State</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../eventing/consume-producing-events-with-kafka.html">Consuming and producing events using Apache Kafka</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../eventing/consume-produce-events-with-knative-eventing.html">Consuming and producing events on Knative Eventing</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../eventing/event-correlation-with-workflows.html">Event Correlation</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../eventing/working-with-callbacks.html">Callback State</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../eventing/working-with-openapi-callbacks.html">OpenAPI Callback</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Security</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Client Authentication</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../security/authention-support-for-openapi-services.html">OpenAPI Authentication</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../security/orchestrating-third-party-services-with-oauth2.html">OpenAPI OAuth2</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Executing, Testing and Troubleshooting</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Executing and Testing Workflows</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-overview.html">Developer UI</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-instances-page.html">Workflow Instances</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-workflow-definition-page.html">Workflow Definitions</a>
  </li>
  <li class="nav-item" data-depth="4">
    <a class="nav-link" href="../../testing-and-troubleshooting/quarkus-dev-ui-extension/quarkus-dev-ui-custom-dashboard-page.html">Dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing-and-troubleshooting/kn-plugin-workflow-overview.html">Command Line</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Quarkus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing-and-troubleshooting/mocking-http-cloudevents-with-wiremock.html">Mocking HTTP CloudEvents</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing-and-troubleshooting/mocking-openapi-services-with-wiremock.html">Mocking OpenAPI Services</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../../testing-and-troubleshooting/basic-integration-tests-with-restassured.html">Testing with REST Assured</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Persistence</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persistence/persistence-with-postgresql.html">Running a workflow service using PostgreSQL</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../persistence/postgresql-flyway-migration.html">Migrate your PostgreSQL database</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <a class="nav-link" href="../index.html">Cloud</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Operator</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="install-serverless-operator.html">Installation</a>
  </li>
  <li class="nav-item is-current-page" data-depth="3">
    <a class="nav-link" href="developing-workflows.html">Development Mode</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="referencing-resource-files.html">Referencing Workflow Resources</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="configuring-workflows.html">Configuration</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="build-and-deploy-workflows.html">Building and Deploying Workflow Images</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="workflow-status-conditions.html">Custom Resource Status</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="known-issues.html">Known Issues</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Quarkus</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/build-workflow-image-with-quarkus-cli.html">Building workflow images using Quarkus CLI</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/deploying-on-openshift.html">Deploying Workflows on OpenShift</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/deploying-on-minikube.html">Deploying Workflows on Minikube</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/deploying-on-kubernetes.html">Deploying Workflows on Kubernetes</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="../quarkus/kubernetes-service-discovery.html">Kubernetes service discovery</a>
  </li>
</ul>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Integrations</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/camel-routes-integration.html">Integrating with Camel Routes</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/custom-functions-knative.html">Invoking Knative services</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/expose-metrics-to-prometheus.html">Exposing workflow base metrics to Prometheus</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../integrations/serverless-dashboard-with-runtime-data.html">Displaying workflow data in dashboards</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Supporting Services</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../supporting-services/jobs-service.html">Job Service</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Use Cases</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../use-cases/orchestration-based-saga-pattern.html">Saga Orchestration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="../../use-cases/timeout-showcase-example.html">Timeouts Showcase</a>
  </li>
</ul>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="nav-panel-explore" data-panel="explore">
  <div class="context">
    <span class="title">Kogito Serverless Workflow Guides</span>
    <span class="version">1.40</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <a class="title" href="../../../latest/index.html">Kogito Serverless Workflow Guides</a>
      <ul class="versions">
        <li class="version">
          <a href="../../../main/index.html">snapshot</a>
        </li>
        <li class="version">
          <a href="../../../1.42.0-SNAPSHOT/index.html">1.42-RC</a>
        </li>
        <li class="version is-latest">
          <a href="../../../latest/index.html">1.41</a>
        </li>
        <li class="version is-current">
          <a href="../../index.html">1.40</a>
        </li>
        <li class="version">
          <a href="../../../1.40.0-SNAPSHOT/index.html">1.40-RC</a>
        </li>
        <li class="version">
          <a href="../../../1.39.0.Final/index.html">1.39</a>
        </li>
        <li class="version">
          <a href="../../../1.38.0.Final/index.html">1.38</a>
        </li>
        <li class="version">
          <a href="../../../1.37.0.Final/index.html">1.37</a>
        </li>
        <li class="version">
          <a href="../../../1.36.1.Final/index.html">1.36</a>
        </li>
        <li class="version">
          <a href="../../../1.35.0.Final/index.html">1.35</a>
        </li>
        <li class="version">
          <a href="../../../1.34.0.Final/index.html">1.34</a>
        </li>
        <li class="version">
          <a href="../../../1.33.0.Final/index.html">1.33</a>
        </li>
        <li class="version">
          <a href="../../../1.32.0.Final/index.html">1.32</a>
        </li>
        <li class="version">
          <a href="../../../1.31.1.Final/index.html">1.31</a>
        </li>
        <li class="version">
          <a href="../../../1.30.0.Final/index.html">1.30</a>
        </li>
        <li class="version">
          <a href="../../../1.29.0.Final/index.html">1.29</a>
        </li>
        <li class="version">
          <a href="../../../1.28.0.Final/index.html">1.28</a>
        </li>
        <li class="version">
          <a href="../../../1.27.0.Final/index.html">1.27</a>
        </li>
        <li class="version">
          <a href="../../../1.26.0.Final/index.html">1.26</a>
        </li>
        <li class="version">
          <a href="../../../1.25.0.Final/index.html">1.25</a>
        </li>
        <li class="version">
          <a href="../../../1.24.1.Final/index.html">1.24</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
<main class="article">
<div class="toolbar" role="navigation">
<button class="nav-toggle"></button>
  <a href="../../../latest/index.html" class="home-link"></a>
<nav class="breadcrumbs" aria-label="breadcrumbs">
  <ul>
    <li><a href="../../index.html">Kogito Serverless Workflow Guides</a></li>
    <li><a href="../index.html">Cloud</a></li>
    <li>Operator</li>
    <li><a href="developing-workflows.html">Development Mode</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="version-menu-toggle" title="Show other versions of page">1.40</button>
  <div class="version-menu">
    <a class="version" href="../../../main/cloud/operator/developing-workflows.html">snapshot</a>
    <a class="version" href="../../../1.42.0-SNAPSHOT/cloud/operator/developing-workflows.html">1.42-RC</a>
    <a class="version" href="../../../latest/cloud/operator/developing-workflows.html">1.41</a>
    <a class="version is-current" href="developing-workflows.html">1.40</a>
    <a class="version" href="../../../1.40.0-SNAPSHOT/cloud/operator/developing-workflows.html">1.40-RC</a>
    <a class="version" href="../../../1.39.0.Final/cloud/operator/developing-workflows.html">1.39</a>
    <a class="version" href="../../../1.38.0.Final/cloud/operator/developing-workflows.html">1.38</a>
    <a class="version" href="../../../1.37.0.Final/cloud/operator/developing-workflows.html">1.37</a>
    <a class="version is-missing" href="../../../1.36.1.Final/index.html">1.36</a>
    <a class="version is-missing" href="../../../1.35.0.Final/index.html">1.35</a>
    <a class="version is-missing" href="../../../1.34.0.Final/index.html">1.34</a>
    <a class="version is-missing" href="../../../1.33.0.Final/index.html">1.33</a>
    <a class="version is-missing" href="../../../1.32.0.Final/index.html">1.32</a>
    <a class="version is-missing" href="../../../1.31.1.Final/index.html">1.31</a>
    <a class="version is-missing" href="../../../1.30.0.Final/index.html">1.30</a>
    <a class="version is-missing" href="../../../1.29.0.Final/index.html">1.29</a>
    <a class="version is-missing" href="../../../1.28.0.Final/index.html">1.28</a>
    <a class="version is-missing" href="../../../1.27.0.Final/index.html">1.27</a>
    <a class="version is-missing" href="../../../1.26.0.Final/index.html">1.26</a>
    <a class="version is-missing" href="../../../1.25.0.Final/index.html">1.25</a>
    <a class="version is-missing" href="../../../1.24.1.Final/index.html">1.24</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/kiegroup/kogito-docs/edit/1.40.x/serverlessworkflow/modules/ROOT/pages/cloud/operator/developing-workflows.adoc">Edit this Page</a></div>
  </div>
  <div class="content">
<aside class="toc sidebar" data-title="Contents" data-levels="2">
  <div class="toc-menu"></div>
</aside>
<article class="doc">
<h1 class="page">Developing Workflow with the Operator</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This document describes how you can develop your workflows directly on Kubernetes with the SonataFlow Operator.</p>
</div>
<div class="paragraph">
<p>Workflows in the development profile are not tailored for production environments. To build and deploy an immutable Workflow with the operator, see <a href="build-and-deploy-workflows.html" class="xref page">Building and Deploying Workflows with the Operator</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>SonataFlow Operator is under active development with features yet to be implemented. Please see <a href="known-issues.html" class="xref page">SonataFlow Operator Known Issues, Limitations and Roadmap</a>.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction_to_the_development_profile"><a class="anchor" href="#_introduction_to_the_development_profile"></a>Introduction to the Development Profile</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The development profile is the easiest way to start playing around with workflows and the operator.</p>
</div>
<div class="paragraph">
<p>To get started, you can use an editor of your choice to create a new <code>SonataFlow</code> Custom Resource YAML definition. For example:</p>
</div>
<div class="listingblock">
<div class="title">Example of a Kubernetes Kogito Serverless Workflow YAML definition</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-yaml hljs" data-lang="yaml">apiVersion: sonataflow.org/v1alpha08
kind: SonataFlow
metadata:
  name: greeting
  annotations:
    sonataflow.org/description: Greeting example on k8s!
    sonataflow.org/version: 0.0.1
    sonataflow.org/profile: dev <i class="conum" data-value="1"></i><b>(1)</b>
spec:
  flow: <i class="conum" data-value="2"></i><b>(2)</b>
    start: ChooseOnLanguage
    functions:
      - name: greetFunction
        type: custom
        operation: sysout
    states:
      - name: ChooseOnLanguage
        type: switch
        dataConditions:
          - condition: "${ .language == \"English\" }"
            transition: GreetInEnglish
          - condition: "${ .language == \"Spanish\" }"
            transition: GreetInSpanish
        defaultCondition: GreetInEnglish
      - name: GreetInEnglish
        type: inject
        data:
          greeting: "Hello from JSON Workflow, "
        transition: GreetPerson
      - name: GreetInSpanish
        type: inject
        data:
          greeting: "Saludos desde JSON Workflow, "
        transition: GreetPerson
      - name: GreetPerson
        type: operation
        actions:
          - name: greetAction
            functionRef:
              refName: greetFunction
              arguments:
                message:  ".greeting+.name"
        end: true</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>The annotation <code>sonataflow.org/profile: dev</code> tells the operator to deploy the Workflow using the development profile. This means that the operator will build a running instance of the Workflow ready to receive changes during your development cycle.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>In the <code>flow</code> attribute goes the workflow definition as described by the <a href="../../getting-started/cncf-serverless-workflow-specification-support.html" class="xref page">CNCF Serverless Workflow specification</a>. So if you already have a workflow definition, you can use it there. Alternatively, you can use the <a href="../../tooling/serverless-workflow-editor/swf-editor-overview.html" class="xref page">editors to create your workflow definition</a>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_deploying_a_new_workflow"><a class="anchor" href="#_deploying_a_new_workflow"></a>Deploying a New Workflow</h2>
<div class="sectionbody">
<div class="ulist">
<div class="title">Prerequisites</div>
<ul>
<li>
<p>You have <a href="install-serverless-operator.html" class="xref page">installed the SonataFlow Operator</a></p>
</li>
<li>
<p>You have created a new Kogito Serverless Workflow Kubernetes YAML file</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Having a new Kubernetes workflow definition in a YAML file (you can use the above example), you can deploy it in your cluster with the following command:</p>
</div>
<div class="listingblock">
<div class="title">Deploying a new SonataFlow Custom Resource in Kubernetes</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f &lt;your_file&gt; -n &lt;your_namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Alternatively, you can try one of the examples available in the operator repository:</p>
</div>
<div class="listingblock">
<div class="title">Deploying the greeting workflow example</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl apply -f https://raw.githubusercontent.com/kiegroup/kogito-serverless-operator/v1.40.0/test/testdata/sw.kogito_v1alpha08_sonataflow_devmode.yaml -n &lt;your_namespace&gt;</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Replace <code>&lt;your_namespace&gt;</code> with the Namespace you&#8217;re using to deploy your workflows</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can follow the workflow status to check if everything is fine with:</p>
</div>
<div class="listingblock">
<div class="title">Checking the workflow status</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl get workflow -n &lt;your_namespace&gt; -w</code></pre>
</div>
</div>
<div class="paragraph">
<p>You should see the workflow conditions evolving to <code>READY</code> in a few seconds:</p>
</div>
<div class="listingblock">
<div class="title">Example workflow deployment status</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">NAME       PROFILE   VERSION   ADDRESS   READY   REASON
greeting   dev       0.0.1               False   WaitingForDeployment
greeting   dev       0.0.1               True</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The <code>REASON</code> field gives you a cue about the current workflow status.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can make changes to the workflow YAML using any Kubernetes editor. For example, you can use <code>kubectl</code> and the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl edit workflow/greeting -n &lt;your_namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>and changing the workflow definition inside the CustomResource Spec section.</p>
</div>
<div class="paragraph">
<p>Otherwise, you can save the CustomResource definition file and edit it with your desired editor, and re-applying it.</p>
</div>
<div class="paragraph">
<p>For example using VSCode, there are the commands needed:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">curl -S https://raw.githubusercontent.com/kiegroup/kogito-serverless-operator/v1.40.0/config/samples/sw.kogito_v1alpha08_sonataflow_devmode.yaml &gt; workflow_devmode.yaml
code workflow_devmode.yaml
kubectl apply -f workflow_devmode.yaml -n &lt;your_namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>The operator ensures that the latest Workflow definition is running and ready.
This way, you can include the Workflow in your development scenario and start making requests to it.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_check_if_the_workflow_is_running"><a class="anchor" href="#_check_if_the_workflow_is_running"></a>Check if the Workflow is running</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to check that the Kogito Serverless Workflow Greeting workflow is up and running, you can try to perform a test HTTP call. First, you must get the service URL:</p>
</div>
<div class="listingblock">
<div class="title">Exposing the Workflow</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">minikube service greeting -n &lt;your_namespace&gt; --url
http://127.0.0.1:57053

# use the above output to get the current workflow URL in your environment</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>When running on Minikube, the service is already exposed for you via <code>NodePort</code>. On OpenShift, <a href="https://docs.openshift.com/container-platform/4.13/networking/routes/route-configuration.html">a Route is automatically created in devmode</a>. If you&#8217;re running on Kubernetes you can <a href="https://kubernetes.io/docs/concepts/services-networking/ingress/">expose your service using an Ingress</a>.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can now point your browser to the Swagger UI and start making requests with the REST interface.</p>
</div>
<div class="paragraph">
<p>For example, using the above command execution you can access the Swagger UI via <code><a href="http://127.0.0.1:57053/q/swagger-ui/" class="bare">http://127.0.0.1:57053/q/swagger-ui/</a></code>.</p>
</div>
<div class="paragraph">
<p>At the Swagger UI, click on "POST /greeting", then on "Try it out!". Copy the following JSON message and hit execute:</p>
</div>
<div class="listingblock">
<div class="title">Operation Greeting result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "name": "Jane Doe"
}</code></pre>
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="../../_images/cloud/swagger-ui-operator.png" alt="swagger ui operator">
</div>
<div class="title">Figure 1. The Swagger UI executing the POST /greeting operation</div>
</div>
<div class="paragraph">
<p>You should see a result similar to this:</p>
</div>
<div class="listingblock">
<div class="title">Operation Greeting result</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "id": "984b5c6c-36ef-48ba-aa11-89fa54d25e98",
  "workflowdata": {
    "name": "Jane Doe",
    "greeting": "Hello from JSON Workflow, "
  }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can even make changes to your <code>SonataFlow</code> YAML file and see the results using the Swagger UI.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_remove_the_workflow"><a class="anchor" href="#_remove_the_workflow"></a>Remove the Workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In order to remove the Kogito Serverless Workflow Greeting, you can execute the following command:</p>
</div>
<div class="listingblock">
<div class="title">Removing the Workflow</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">kubectl delete -f &lt;your_file&gt; -n &lt;your_namespace&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_referencing_resources_in_the_workflow"><a class="anchor" href="#_referencing_resources_in_the_workflow"></a>Referencing resources in the Workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>See the <a href="referencing-resource-files.html" class="xref page">Referencing Additional Files in the Workflow</a> guide for more complex scenarios where you may need to reference other resources in the workflow definition.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_using_another_workflow_base_image"><a class="anchor" href="#_using_another_workflow_base_image"></a>Using another Workflow base image</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If your scenario has strict policies for image usage, such as security or hardening constraints, you can replace the default image used by the operator. Alternatively, you might want to test a nightly build with a bug fix or a custom image containing your customizations.</p>
</div>
<div class="paragraph">
<p>By default, the operator will use the image distributed upstream to run the workflows in the development profile. You can change this image by editing the <code>SonataFlowPlatform</code> custom resource in the namespace where you deployed your workflows:</p>
</div>
<div class="listingblock">
<div class="title">Patching the current SonataFlowPlatform with the new image</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash"># use `kubectl get sonataflowplatform` to get the SonataFlowPlatform name
kubectl patch sonataflowplatform &lt;name&gt; --patch  'spec:\n devBaseImage: &lt;your new image full name with tag&gt;' -n &lt;your_namespace&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>From now on, every deployment in the development profile will use this image to run the workflow.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The default image was created to run a Quarkus Java application in dev mode. You can replace this image with another one as long as it has the same concept. One way of doing this is using the default as the base image.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="troubleshooting"><a class="anchor" href="#troubleshooting"></a>Troubleshooting the Workflow</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As you make changes to your workflow during development, it&#8217;s likely that you will need to troubleshoot it when something goes wrong.</p>
</div>
<div class="paragraph">
<p>To ensure the Workflow is running in a healthy state, the operator deploys its Pod with health check probes.
If the changes you make to your Workflow cause the health checks to fail, the Pod executing the Workflow will stop responding.</p>
</div>
<div class="paragraph">
<p>The following will help you discover the reason for any failure during development.</p>
</div>
<div class="sect2">
<h3 id="basic-troubleshooting"><a class="anchor" href="#basic-troubleshooting"></a>Basic Troubleshooting</h3>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Analyze the workflow status with:</p>
<div class="listingblock">
<div class="title">Get the workflow status conditions</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get workflow &lt;name&gt; -o jsonpath={.status.conditions} | jq .</code></pre>
</div>
</div>
<div class="paragraph">
<p>It can give you a clue about what might be happening. See <a href="workflow-status-conditions.html" class="xref page">Understanding Workflow Services Status Conditions</a> for more information.</p>
</div>
</li>
<li>
<p>Fetch the logs and look for <code>ERROR</code> messages:</p>
<div class="listingblock">
<div class="title">Watch the workflow logs</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl logs deployment/&lt;workflow-name&gt; -f</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are looking for opening an issue or ask in Kogito Serverless Workflow communication channels, this logging information is always useful for the person who will try to help you.</p>
</div>
</li>
</ol>
</div>
</div>
<div class="sect2">
<h3 id="_possible_failure_scenarios"><a class="anchor" href="#_possible_failure_scenarios"></a>Possible Failure Scenarios</h3>
<div class="sect3">
<h4 id="_feature_not_yet_supported"><a class="anchor" href="#_feature_not_yet_supported"></a>Feature Not Yet Supported</h4>
<div class="paragraph">
<p>The SonataFlow Operator is under active development. Sometimes a feature might not be available yet. Please see <a href="known-issues.html" class="xref page">SonataFlow Operator Known Issues, Limitations and Roadmap</a> for a comprehensive list of available features.</p>
</div>
<div class="paragraph">
<p>If you identify you are referring to a feature that is not available yet, you can file a new issue so we can prioritize it for you or request in Kogito Serverless Workflow communication channels.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrong_workflow_configuration"><a class="anchor" href="#_wrong_workflow_configuration"></a>Wrong Workflow Configuration</h4>
<div class="paragraph">
<p>A wrong configuration (or lack of one) might prevent your Workflow from running correctly.
The operator deploys a <code>ConfigMap</code> that holds the workflow properties for the Workflow.</p>
</div>
<div class="listingblock">
<div class="title">Get the properties ConfigMap</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-shell hljs" data-lang="shell">kubectl get cm &lt;workflow-name&gt;-props</code></pre>
</div>
</div>
<div class="paragraph">
<p>The <code>ConfigMap</code> name pattern is the workflow name followed by <code>-props</code>.</p>
</div>
<div class="paragraph">
<p>Make sure that the configuration is correct and you&#8217;re not lacking any required properties for a given feature to work.
If so, you can make your changes to the configuration as you normally would to any <code>ConfigMap</code>.</p>
</div>
<div class="paragraph">
<p>Once you have updated the configuration in the <code>ConfigMap</code>, the operator ensures that these properties are applied to the workflow.</p>
</div>
<div class="paragraph">
<p>See <a href="configuring-workflows.html" class="xref page">Configuring Workflow Services</a> for more information.</p>
</div>
</div>
<div class="sect3">
<h4 id="_wrong_workflow_definition"><a class="anchor" href="#_wrong_workflow_definition"></a>Wrong Workflow Definition</h4>
<div class="paragraph">
<p>The SonataFlow Operator validates the workflow definition at the moment you create or edit the YAML file, to avoid persisting a workflow in an invalid state.
Although, the operator is under active development, so errors during the validation might occur.</p>
</div>
<div class="paragraph">
<p>In this case, you might have to make a few modifications to the workflow definition to fix any structural error.</p>
</div>
<div class="paragraph">
<p>You can identify such problems by looking at the deployed Workflow logs as explained <a href="#basic-troubleshooting">here</a>.</p>
</div>
<div class="paragraph">
<p>If you found an issue that a cause is not listed in this section, please <a href="https://github.com/kiegroup/kogito-docs/issues/new">let us know</a>.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_additional_resources"><a class="anchor" href="#_additional_resources"></a>Additional resources</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="referencing-resource-files.html" class="xref page">Referencing Additional Files in the Workflow</a></p>
</li>
<li>
<p><a href="build-and-deploy-workflows.html" class="xref page">Building and Deploying Workflows with the Operator</a></p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_found_an_issue"><a class="anchor" href="#_found_an_issue"></a><em><strong>Found an issue?</strong></em></h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you find an issue or any misleading information, please feel free to report it <a href="https://github.com/kiegroup/kogito-docs/issues/new">here</a>.
We really appreciate it!</p>
</div>
</div>
</div>
</article>
  </div>
</main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../../../_/js/site.js"></script>
<script async src="../../../../_/js/vendor/highlight.js"></script>
<script src="../../../../_/js/tabsBehavior.js"></script>
<script src="../../../../_/js/vendor/lunr.js"></script>
<script src="../../../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../../../.." data-snippet-length="100" data-stylesheet="../../../../_/css/search.css"></script>
<script async src="../../../../search-index.js"></script>
  </body>
</html>
